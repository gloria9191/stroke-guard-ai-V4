<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>StrokeGuard AI - ë‡Œì¡¸ì¤‘ ìœ„í—˜ ì˜ˆì¸¡</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background:#f2f4f7;
            font-family: 'Noto Sans KR', sans-serif;
        }

        .container-box {
            max-width: 540px;
            margin: 20px auto;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        }

        .scroll-hint {
            text-align: center;
            margin-bottom: 15px;
            font-size: 15px;
            color: #6c757d;
        }

        .result-box {
            margin-top: 25px;
            padding: 22px;
            border-radius: 14px;
            font-size: 16px;
            line-height: 1.6;
            min-height: 260px; /* ìš”ì²­ ë°˜ì˜: ê²°ê³¼ ë°•ìŠ¤ í¬ê¸° ì¦ê°€ */
            white-space: pre-line;
        }

        .result-low {
            background: #e8f5e9;
            color: #1b5e20;
            border-left: 8px solid #43a047;
        }
        .result-mid {
            background: #fff3cd;
            color: #7a5f00;
            border-left: 8px solid #ffb300;
        }
        .result-high {
            background: #ffebee;
            color: #b71c1c;
            border-left: 8px solid #e53935;
        }

        .btn-main {
            width: 100%;
            padding: 12px;
            border-radius: 10px;
            font-size: 17px;
            font-weight: 600;
        }

        .desc-box {
            background: #f8f9fa;
            padding: 13px;
            border-radius: 10px;
            margin-bottom: 18px;
            font-size: 15px;
        }
    </style>
</head>
<body>

<div class="container-box">

    <div class="scroll-hint">
        ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤í•˜ì—¬ ì„¤ë¬¸ì„ ì§„í–‰í•˜ì„¸ìš” â†“
    </div>

    <h3 class="text-center mb-3"><b>StrokeGuard AI</b></h3>
    <p class="text-center text-muted mb-4">ë‡Œì¡¸ì¤‘ ë°œë³‘ ìœ„í—˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ</p>

    <div class="desc-box">
        <b>ì…ë ¥ ê¸°ì¤€ ì•ˆë‚´</b><br>
        - ìŒì£¼ ì—¬ë¶€: <b>ì£¼ 1íšŒ ì´ìƒ ìŒì£¼ ì‹œ â€˜ì˜ˆâ€™</b><br>
        - ë‚˜ì´: <b>ë§Œë‚˜ì´</b><br>
        - ì •ìƒ/ìœ„í—˜/ê³ ìœ„í—˜ ê¸°ì¤€:<br>
        &nbsp;&nbsp;â— ì •ìƒ: ì˜ˆì¸¡í™•ë¥  < 40%<br>
        &nbsp;&nbsp;â— ìœ„í—˜: 40% ~ 66%<br>
        &nbsp;&nbsp;â— ê³ ìœ„í—˜: 66% ì´ìƒ<br>
    </div>

    <!-- ==================== FORM ==================== -->
    <form id="riskForm">

        <label class="form-label mt-2">ì„±ë³„</label>
        <select class="form-select" id="gender">
            <option value="1">ë‚¨ì„±</option>
            <option value="0">ì—¬ì„±</option>
        </select>

        <label class="form-label mt-3">ë‚˜ì´ (ë§Œë‚˜ì´)</label>
        <input type="number" class="form-control" id="age" required>

        <label class="form-label mt-3">BMI</label>
        <input type="number" step="0.1" class="form-control" id="bmi" required>

        <label class="form-label mt-3">ìˆ˜ì¶•ê¸° í˜ˆì••(SBP)</label>
        <input type="number" class="form-control" id="sbp" required>

        <label class="form-label mt-3">ì´ì™„ê¸° í˜ˆì••(DBP)</label>
        <input type="number" class="form-control" id="dbp" required>

        <label class="form-label mt-3">ê³µë³µ í˜ˆë‹¹</label>
        <input type="number" class="form-control" id="glucose" required>

        <label class="form-label mt-3">í¡ì—° ì—¬ë¶€</label>
        <select class="form-select" id="smoking">
            <option value="1">í¡ì—°</option>
            <option value="0">ë¹„í¡ì—°</option>
        </select>

        <label class="form-label mt-3">ìŒì£¼ ì—¬ë¶€<br>(ì£¼ 1íšŒ ì´ìƒì€ â€˜ì˜ˆâ€™ë¡œ ê°„ì£¼)</label>
        <select class="form-select" id="drinking">
            <option value="1">ì˜ˆ</option>
            <option value="0">ì•„ë‹ˆì˜¤</option>
        </select>

        <button type="submit" class="btn btn-primary btn-main mt-4">
            ê²€ì‚¬í•˜ê¸°
        </button>

    </form>

    <div id="result" class="result-box mt-4" style="display:none;">
    </div>

</div>

<!-- ==================== SCRIPT ==================== -->
<script>
document.getElementById("riskForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const payload = {
        gender:    document.getElementById("gender").value,
        age:       document.getElementById("age").value,
        bmi:       document.getElementById("bmi").value,
        sbp:       document.getElementById("sbp").value,
        dbp:       document.getElementById("dbp").value,
        glucose:   document.getElementById("glucose").value,
        smoking:   document.getElementById("smoking").value,
        drinking:  document.getElementById("drinking").value,
    };

    const res = await fetch("/predict", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(payload)
    });

    const data = await res.json();

    const box = document.getElementById("result");
    box.style.display = "block";
    box.className = "result-box " + data.risk_class;

    box.innerHTML =
        "<b>ğŸ” ì˜ˆì¸¡ ê²°ê³¼</b><br>" +
        "ì˜ˆì¸¡ í™•ë¥ : <b>" + data.prob + "%</b><br>" +
        "ìœ„í—˜ë„: <b>" + data.risk_text + "</b><br><br>" +
        "<b>ìƒí™œ ì¡°ì–¸</b><br>" + data.advice + "<br><br>" +
        "<small>â€» ë³¸ ëª¨ë¸ì€ í˜ˆì••Â·í˜ˆë‹¹Â·BMIÂ·í¡ì—°Â·ìŒì£¼Â·ë‚˜ì´ ë“± ì˜í•™ì  ê·¼ê±°ê°€ í™•ì¸ëœ ì§€í‘œë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì˜ˆì¸¡í•©ë‹ˆë‹¤.<br>" +
        "   ê°„ë‹¨í•œ ë¬¸í•­ì´ë¼ë„ ë‡Œì¡¸ì¤‘ê³¼ ì—°ê´€ì„±ì´ ë†’ì€ í•µì‹¬ ë³€ìˆ˜ë“¤ë¡œ êµ¬ì„±ë˜ì–´ ìˆì–´ ì‹ ë¢° ê°€ëŠ¥í•œ ê²°ê³¼ë¥¼ ì œê³µí•©ë‹ˆë‹¤.</small>";
});
</script>

</body>
</html>
